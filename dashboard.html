<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BTX.ONE ‚Äì Member Dashboard (Demo)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",sans-serif}
    body{
      min-height:100vh;
      background:radial-gradient(circle at top,#020617,#020617 60%);
      color:#e5f0ff;
      padding:16px;
    }
    a{color:#38bdf8;text-decoration:none}

    .shell{
      max-width:1100px;
      margin:0 auto;
    }

    /* HEADER */
    .dash-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:18px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    /* ‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã ‡¶∏‡¶¨‡ßÅ‡¶ú B-‡¶¨‡¶ï‡ßç‡¶∏ ‡¶Ü‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶®‡¶æ, ‡¶ö‡¶æ‡¶á‡¶≤‡ßá CSS ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¶‡¶æ‡¶ì */
    .brand-logo{
      display:none;
    }
    /* üîπ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ó‡ßã‡¶≤ BTX Logo (images/logo.png) */
    .brand-logo-img{
      width:46px;
      height:46px;
      border-radius:50%;
      object-fit:cover;
      filter:
        drop-shadow(0 0 8px rgba(255,255,255,.35))
        drop-shadow(0 0 18px rgba(34,197,94,.55));
    }
    .brand-title h1{
      font-size:18px;
      letter-spacing:.22em;
      text-transform:uppercase;
    }
    .brand-title p{
      font-size:11px;
      color:#9ca3af;
      margin-top:2px;
    }

    .header-actions{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
    }
    .btn-small{
      border:none;
      border-radius:999px;
      padding:7px 14px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      cursor:pointer;
      background:linear-gradient(135deg,#38bdf8,#22c55e);
      color:#020617;
      box-shadow:0 14px 32px rgba(56,189,248,.85);
    }
    .btn-outline-small{
      border-radius:999px;
      padding:6px 12px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      cursor:pointer;
    }

    /* CARD WRAPPER */
    .dash-card-main{
      position:relative;
      border-radius:26px;
      padding:18px 18px 20px;
      background:linear-gradient(135deg,rgba(15,23,42,.98),rgba(30,64,175,.96));
      box-shadow:
        0 0 0 2px rgba(56,189,248,.7),
        0 26px 70px rgba(0,0,0,.9);
      overflow:hidden;
    }
    .dash-glow{
      position:absolute;
      inset:-90px;
      background:
        radial-gradient(circle at 0 0,rgba(56,189,248,.25),transparent 60%),
        radial-gradient(circle at 100% 100%,rgba(74,222,128,.25),transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .dash-inner{position:relative;z-index:1;}

    /* WELCOME */
    .welcome-row{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }
    .welcome-main{
      flex:1;
      min-width:220px;
    }
    .welcome-main h2{
      font-size:18px;
      margin-bottom:4px;
    }
    .welcome-main span{
      color:#a5b4fc;
      font-size:13px;
    }
    .badge-role{
      display:inline-flex;
      align-items:center;
      gap:4px;
      border-radius:999px;
      padding:3px 10px;
      font-size:10px;
      margin-top:6px;
      border:1px solid rgba(74,222,128,.7);
      background:rgba(22,163,74,.2);
      color:#bbf7d0;
    }
    .badge-member{
      border-color:rgba(56,189,248,.7);
      background:rgba(30,64,175,.25);
      color:#bae6fd;
    }

    .welcome-right{
      min-width:200px;
      max-width:260px;
      font-size:12px;
      color:#cbd5f5;
    }
    .welcome-right div{margin-bottom:2px;}

    /* SUMMARY CARDS */
    .summary-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:10px;
      margin-bottom:16px;
    }
    .summary-card{
      border-radius:18px;
      padding:10px 12px;
      background:rgba(15,23,42,.94);
      box-shadow:0 0 0 1px rgba(148,163,184,.4);
      font-size:12px;
    }
    .summary-card p{
      color:#9ca3af;
      margin-bottom:3px;
    }
    .summary-card h3{
      font-size:20px;
      font-weight:700;
    }
    .summary-tag{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:#a5b4fc;
      margin-top:2px;
    }

    /* REFERRAL SECTION */
    .ref-card{
      border-radius:18px;
      padding:12px 12px 12px;
      background:rgba(15,23,42,.98);
      box-shadow:0 0 0 1px rgba(56,189,248,.55);
      margin-bottom:14px;
    }
    .ref-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:6px;
    }
    .ref-header h3{
      font-size:14px;
    }
    .ref-header span{
      font-size:11px;
      color:#9ca3af;
    }
    .ref-body{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .ref-input{
      flex:1;
      min-width:200px;
    }
    .ref-input input{
      width:100%;
      padding:8px 10px;
      border-radius:999px;
      border:none;
      outline:none;
      background:rgba(15,23,42,1);
      color:#e5f0ff;
      font-size:12px;
      box-shadow:0 0 0 1px rgba(148,163,184,.7);
    }
    .ref-btn{
      border:none;
      border-radius:999px;
      padding:8px 14px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.14em;
      cursor:pointer;
      background:linear-gradient(135deg,#38bdf8,#22c55e);
      color:#020617;
      box-shadow:0 14px 34px rgba(59,130,246,.9);
      white-space:nowrap;
    }

    /* ACCOUNT BOX */
    .info-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:10px;
      margin-bottom:4px;
    }
    .info-card{
      border-radius:16px;
      padding:10px 12px;
      background:rgba(15,23,42,.96);
      box-shadow:0 0 0 1px rgba(148,163,184,.45);
      font-size:12px;
    }
    .info-card h4{
      font-size:13px;
      margin-bottom:6px;
    }
    .info-row{
      display:flex;
      justify-content:space-between;
      margin-bottom:2px;
    }
    .info-row span:first-child{
      color:#9ca3af;
    }

    .note{
      margin-top:8px;
      font-size:10px;
      color:#9ca3af;
    }

    @media(max-width:640px){
      body{padding:10px;}
      .dash-header{flex-direction:column;align-items:flex-start;gap:8px;}
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- HEADER -->
    <header class="dash-header">
      <div class="brand">
        <!-- üîπ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ó‡ßã‡¶≤ logo -->
        <img src="images/logo.png" alt="BTX Logo" class="brand-logo-img">
        <div class="brand-title">
          <h1>BTX.ONE</h1>
          <p>USDT MLM ‚Ä¢ Member Dashboard (Demo)</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="adminBtn" class="btn-outline-small" style="display:none;"
                onclick="goAdmin()">Admin Panel</button>
        <button class="btn-outline-small" onclick="goHome()">Home</button>
        <button class="btn-small" onclick="logout()">Logout</button>
      </div>
    </header>

    <!-- MAIN CARD -->
    <section class="dash-card-main">
      <div class="dash-glow"></div>
      <div class="dash-inner">

        <!-- WELCOME -->
        <div class="welcome-row">
          <div class="welcome-main">
            <h2 id="welcomeName">Welcome, Member</h2>
            <span id="welcomeUser">@username</span>
            <div id="roleBadge"></div>
          </div>
          <div class="welcome-right">
            <div id="infoEmail"></div>
            <div id="infoCountry"></div>
            <div id="infoMobile"></div>
            <div id="infoSponsor"></div>
          </div>
        </div>

        <!-- SUMMARY CARDS -->
        <div class="summary-grid">
          <div class="summary-card">
            <p>Current Balance (Demo)</p>
            <h3 id="sumBalance">$0.00</h3>
            <div class="summary-tag">ROI + All Income</div>
          </div>
          <div class="summary-card">
            <p>Total Deposit</p>
            <h3 id="sumDeposit">$0.00</h3>
            <div class="summary-tag">Demo deposited amount</div>
          </div>
          <div class="summary-card">
            <p>Direct Sponsor Income</p>
            <h3 id="sumDirect">$0.00</h3>
            <div class="summary-tag">From direct referrals</div>
          </div>
          <div class="summary-card">
            <p>Rank (Demo)</p>
            <h3 id="sumTeam">No Rank</h3>
            <div class="summary-tag">Based on team business</div>
          </div>
        </div>

        <!-- REFERRAL SECTION -->
        <div class="ref-card">
          <div class="ref-header">
            <div>
              <h3>My Referral Link</h3>
              <span>‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá Sponsor ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶ß‡¶∞‡¶¨‡ßá‡•§ (Demo only)</span>
            </div>
          </div>
          <div class="ref-body">
            <div class="ref-input">
              <input id="myRefLink" readonly />
            </div>
            <button class="ref-btn" onclick="copyRefLink()">Copy Link</button>
          </div>
        </div>

        <!-- ACCOUNT INFO -->
        <div class="info-grid">
          <div class="info-card">
            <h4>Account Details</h4>
            <div class="info-row">
              <span>Full Name</span>
              <span id="accName">-</span>
            </div>
            <div class="info-row">
              <span>Username</span>
              <span id="accUser">-</span>
            </div>
            <div class="info-row">
              <span>Email</span>
              <span id="accEmail">-</span>
            </div>
            <div class="info-row">
              <span>Role</span>
              <span id="accRole">-</span>
            </div>
          </div>

          <div class="info-card">
            <h4>Network Info</h4>
            <div class="info-row">
              <span>Country</span>
              <span id="accCountry">-</span>
            </div>
            <div class="info-row">
              <span>Mobile</span>
              <span id="accMobile">-</span>
            </div>
            <div class="info-row">
              <span>Sponsor</span>
              <span id="accSponsor">-</span>
            </div>
            <div class="info-row">
              <span>Joined</span>
              <span id="accJoined">-</span>
            </div>
          </div>
        </div>

        <p class="note">
          ‚ö† ‡¶è‡¶á ‡¶™‡ßÅ‡¶∞‡ßã ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶° / ‡¶°‡ßá‡¶Æ‡ßã‡•§ ‡¶∏‡¶¨ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ localStorage-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡•§
          ‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ USDT / Real Investment ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§
        </p>

      </div>
    </section>
  </div>

  <!-- üîπ ‡¶Ø‡¶¶‡¶ø mlm.js ‡¶Ü‡¶õ‡ßá, ‡¶è‡¶á ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶§‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶¨‡¶∏‡¶æ‡¶ì -->
  <script src="mlm.js"></script>

  <script>
    var STORAGE_CURRENT = "btx_current_user_v1";

    function getCurrentUser(){
      var raw = localStorage.getItem(STORAGE_CURRENT);
      if(!raw) return null;
      try{
        return JSON.parse(raw);
      }catch(e){
        return null;
      }
    }

    function logout(){
      localStorage.removeItem(STORAGE_CURRENT);
      alert("Logged out (demo).");
      window.location.href = "login.html";
    }

    function goHome(){
      window.location.href = "index.html";
    }

    function goAdmin(){
      window.location.href = "admin.html";
    }

    function copyRefLink(){
      var el = document.getElementById("myRefLink");
      if(!el || !el.value){
        alert("Referral link empty.");
        return;
      }
      el.select();
      try{
        document.execCommand("copy");
        alert("üîó Referral link copied!");
      }catch(e){
        alert("Copy not supported ‚Äì mobile ‡¶•‡ßá‡¶ï‡ßá manually ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
      }
    }

    // INIT
    (function initDashboard(){
      var user = getCurrentUser();
      if(!user){
        window.location.href = "login.html";
        return;
      }

      // üîπ default = registration-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶π‡¶ì‡ßü‡¶æ ‡¶°‡¶æ‡¶ü‡¶æ
      var me = user;

      // üîπ ‡¶Ø‡¶¶‡¶ø BTX_MLM engine ‡¶•‡¶æ‡¶ï‡ßá ‚Üí income, deposit, rank ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶®‡ßá‡¶¨
      if(window.BTX_MLM && typeof BTX_MLM.recalcAll === "function"){
        try{
          BTX_MLM.recalcAll();
          var fromEngine = BTX_MLM.getUser(user.username);
          if(fromEngine){
            me = fromEngine;
          }
        }catch(e){
          console.warn("MLM engine error (demo):", e);
        }
      }

      // Role ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ admin ‡¶¨‡¶æ‡¶ü‡¶®
      var adminBtn = document.getElementById("adminBtn");
      if(me.role === "admin"){
        adminBtn.style.display = "inline-flex";
      }

      // Welcome text
      document.getElementById("welcomeName").textContent =
        "Welcome, " + (me.fullName || me.username || "Member");
      document.getElementById("welcomeUser").textContent =
        "@" + (me.username || "");

      var roleBadge = document.getElementById("roleBadge");
      if(me.role === "admin"){
        roleBadge.innerHTML =
          '<span class="badge-role">‚óè ADMIN PANEL ACCESS</span>';
      }else{
        roleBadge.innerHTML =
          '<span class="badge-role badge-member">‚óè MEMBER ACCOUNT</span>';
      }

      // Small info right
      document.getElementById("infoEmail").textContent =
        "Email: " + (me.email || "-");
      document.getElementById("infoCountry").textContent =
        "Country: " + (me.country || "-");
      document.getElementById("infoMobile").textContent =
        "Mobile: " + (me.mobile || "-");
      document.getElementById("infoSponsor").textContent =
        "Sponsor: " + (me.sponsor_username || "N/A");

      // Account box
      document.getElementById("accName").textContent = me.fullName || "-";
      document.getElementById("accUser").textContent = me.username || "-";
      document.getElementById("accEmail").textContent = me.email || "-";
      document.getElementById("accRole").textContent =
        (me.role === "admin" ? "Admin" : "Member");

      document.getElementById("accCountry").textContent = me.country || "-";
      document.getElementById("accMobile").textContent = me.mobile || "-";
      document.getElementById("accSponsor").textContent =
        me.sponsor_username || "-";

      if(me.createdAt){
        try{
          var d = new Date(me.createdAt);
          document.getElementById("accJoined").textContent = d.toLocaleString();
        }catch(e){
          document.getElementById("accJoined").textContent = "-";
        }
      }

      // Referral link ‚Äì ‡¶Ø‡¶¶‡¶ø registration ‡¶è ‡¶∏‡ßá‡¶≠ ‡¶•‡¶æ‡¶ï‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞, ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶æ‡¶®‡¶æ‡¶á
      var refLink = me.referralLink;
      if(!refLink){
        refLink =
          window.location.origin +
          "/register-neon.html?ref=" +
          encodeURIComponent(me.username || "");
      }
      document.getElementById("myRefLink").value = refLink;

      // üîπ Summary ‡¶°‡¶æ‡¶ü‡¶æ ‚Äì ‡¶Ø‡¶¶‡¶ø MLM engine ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶∏‡¶¨ 0.00 ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
      var dep  = me.deposit      || 0;
      var bal  = me.totalIncome  || 0;
      var dir  = me.directIncome || 0;
      var rank = me.rankName     || "No Rank";

      document.getElementById("sumBalance").textContent = "$" + bal.toFixed(2);
      document.getElementById("sumDeposit").textContent = "$" + dep.toFixed(2);
      document.getElementById("sumDirect").textContent  = "$" + dir.toFixed(2);
      document.getElementById("sumTeam").textContent    = rank;
    })();
  </script>
</body>
</html>