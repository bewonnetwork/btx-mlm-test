<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BTX.ONE ‚Äì Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",sans-serif}
    body{
      min-height:100vh;
      background:radial-gradient(circle at top,#020617,#020617 60%);
      color:#e5f0ff;
      padding:10px;
    }
    a{text-decoration:none;color:#38bdf8}

    .shell{
      max-width:1100px;
      margin:0 auto;
    }

    /* HEADER WITH LOGO */
    .dash-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:14px;
      gap:10px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand-logo-img{
      width:50px;
      height:50px;
      border-radius:50%;
      object-fit:cover;
      filter:drop-shadow(0 0 12px rgba(56,189,248,.8))
             drop-shadow(0 0 18px rgba(74,222,128,.7));
    }
    .brand-title h1{
      font-size:18px;
      letter-spacing:.22em;
      text-transform:uppercase;
    }
    .brand-title p{
      font-size:11px;
      color:#9ca3af;
      margin-top:2px;
    }

    .header-actions{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btn-small,
    .btn-outline-small{
      border-radius:999px;
      padding:6px 13px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.15em;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn-small{
      border:none;
      background:linear-gradient(135deg,#38bdf8,#22c55e);
      color:#020617;
      box-shadow:0 14px 34px rgba(56,189,248,.9);
    }
    .btn-outline-small{
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
    }

    /* MAIN CARD */
    .dash-card-main{
      position:relative;
      border-radius:26px;
      padding:16px 14px 18px;
      background:linear-gradient(135deg,rgba(15,23,42,.98),rgba(30,64,175,.96));
      box-shadow:
        0 0 0 2px rgba(56,189,248,.7),
        0 24px 70px rgba(0,0,0,.95);
      overflow:hidden;
    }
    .dash-glow{
      position:absolute;
      inset:-90px;
      background:
        radial-gradient(circle at 0 0,rgba(56,189,248,.25),transparent 60%),
        radial-gradient(circle at 100% 100%,rgba(74,222,128,.25),transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .dash-inner{position:relative;z-index:1;}

    /* WELCOME AREA */
    .welcome-row{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .welcome-main{
      flex:1;
      min-width:220px;
    }
    .welcome-main h2{
      font-size:20px;
      margin-bottom:4px;
      text-shadow:0 0 6px rgba(15,23,42,.8),0 0 18px rgba(56,189,248,.9);
    }
    .welcome-main h2 span.big{
      font-weight:800;
      letter-spacing:.15em;
    }
    .welcome-main span#welcomeUser{
      display:block;
      font-size:12px;
      color:#cbd5f5;
    }
    .badge-row{
      margin-top:6px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .badge-role{
      display:inline-flex;
      align-items:center;
      gap:4px;
      border-radius:999px;
      padding:3px 10px;
      font-size:10px;
      border:1px solid rgba(74,222,128,.7);
      background:rgba(22,163,74,.2);
      color:#bbf7d0;
    }
    .badge-member{
      border-color:rgba(56,189,248,.7);
      background:rgba(30,64,175,.3);
      color:#bae6fd;
    }
    .badge-free{
      border-color:rgba(250,204,21,.9);
      background:rgba(30,64,175,.35);
      color:#facc15;
    }

    .welcome-right{
      min-width:200px;
      max-width:260px;
      font-size:11px;
      color:#e5e7eb;
    }
    .welcome-right div{margin-bottom:2px;}

    /* TOP MENU (MOBILE FRIENDLY) */
    .top-menu{
      margin-bottom:10px;
      overflow-x:auto;
    }
    .top-menu-inner{
      display:flex;
      gap:6px;
      padding-bottom:3px;
    }
    .menu-pill{
      font-size:11px;
      padding:5px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(15,23,42,.9);
      white-space:nowrap;
    }
    .menu-pill.active{
      border-color:#38bdf8;
      background:radial-gradient(circle at 0 0,rgba(56,189,248,.45),rgba(15,23,42,1));
      color:#e0f2fe;
    }

    /* SUMMARY CARDS ‚Äì 3D */
    .summary-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:10px;
      margin-bottom:14px;
    }
    .summary-card{
      position:relative;
      border-radius:18px;
      padding:10px 11px;
      background:radial-gradient(circle at 0 0,rgba(15,23,42,1),rgba(15,23,42,.96));
      box-shadow:
        0 10px 25px rgba(0,0,0,.9),
        0 0 0 1px rgba(148,163,184,.55);
      font-size:11px;
    }
    .summary-label{
      color:#9ca3af;
      margin-bottom:2px;
    }
    .summary-value{
      font-size:18px;
      font-weight:700;
    }
    .summary-tag{
      font-size:9px;
      text-transform:uppercase;
      letter-spacing:.14em;
      color:#a5b4fc;
      margin-top:2px;
    }
    .summary-icon{
      position:absolute;
      right:9px;
      top:8px;
      font-size:14px;
      opacity:.7;
    }

    /* MARQUEE / COMPANY TEXT */
    .marquee-wrap{
      margin:6px 0 4px;
      overflow:hidden;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,.95);
    }
    .marquee-track{
      display:inline-block;
      padding:6px 0;
      white-space:nowrap;
      animation:scroll-left 18s linear infinite;
      font-size:11px;
    }
    .marquee-track span{
      margin-right:40px;
      color:#e5e7eb;
    }
    .marquee-track span b{
      color:#facc15;
    }
    .marquee-wrap.reverse .marquee-track{
      animation:scroll-right 22s linear infinite;
      opacity:.9;
    }
    @keyframes scroll-left{
      0%{transform:translateX(0);}
      100%{transform:translateX(-50%);}
    }
    @keyframes scroll-right{
      0%{transform:translateX(-50%);}
      100%{transform:translateX(0);}
    }

    /* INFO GRID */
    .info-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:10px;
      margin-top:6px;
    }
    .info-card{
      border-radius:16px;
      padding:9px 11px;
      background:rgba(15,23,42,.98);
      box-shadow:0 0 0 1px rgba(148,163,184,.55);
      font-size:11px;
    }
    .info-card h4{
      font-size:12px;
      margin-bottom:5px;
    }
    .info-row{
      display:flex;
      justify-content:space-between;
      margin-bottom:2px;
    }
    .info-row span:first-child{color:#9ca3af;}

    .note{
      margin-top:8px;
      font-size:10px;
      color:#9ca3af;
    }

    @media(max-width:640px){
      body{padding:8px;}
      .dash-header{flex-direction:column;align-items:flex-start;}
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- HEADER -->
    <header class="dash-header">
      <div class="brand">
        <img src="images/logo.png" alt="BTX Logo" class="brand-logo-img">
        <div class="brand-title">
          <h1>BTX.ONE</h1>
          <p>USDT ‚Ä¢ Dashboard</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="adminBtn" class="btn-outline-small" style="display:none;"
                onclick="goAdmin()">Admin</button>
        <button class="btn-outline-small" onclick="goHome()">Home</button>
        <button class="btn-small" onclick="logout()">Logout</button>
      </div>
    </header>

    <!-- MAIN CARD -->
    <section class="dash-card-main">
      <div class="dash-glow"></div>
      <div class="dash-inner">

        <!-- WELCOME -->
        <div class="welcome-row">
          <div class="welcome-main">
            <h2 id="welcomeName">
              <span class="big">WELCOME</span>, Member
            </h2>
            <span id="welcomeUser">@username</span>
            <div class="badge-row" id="badgeRow"></div>
          </div>
          <div class="welcome-right">
            <div id="infoEmail"></div>
            <div id="infoCountry"></div>
            <div id="infoMobile"></div>
            <div id="infoSponsor"></div>
          </div>
        </div>

        <!-- TOP MENU -->
        <div class="top-menu">
          <div class="top-menu-inner">
            <div class="menu-pill active">Overview</div>
            <div class="menu-pill">Investments</div>
            <div class="menu-pill">Team</div>
            <div class="menu-pill">Income</div>
            <div class="menu-pill">Reports</div>
          </div>
        </div>

        <!-- COMPANY TEXT MARQUEE (UPPER) -->
        <div class="marquee-wrap">
          <div class="marquee-track" id="marquee1"></div>
        </div>

        <!-- SUMMARY CARDS -->
        <div class="summary-grid">
          <div class="summary-card">
            <div class="summary-icon">üíº</div>
            <div class="summary-label">Current Balance</div>
            <div class="summary-value" id="sumBalance">$0.00</div>
            <div class="summary-tag">Main wallet</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üí≥</div>
            <div class="summary-label">Self Investment</div>
            <div class="summary-value" id="sumSelf">$0.00</div>
            <div class="summary-tag">Personal deposit</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üìà</div>
            <div class="summary-label">Daily Profit (ROI)</div>
            <div class="summary-value" id="sumROI">$0.00</div>
            <div class="summary-tag">Auto ROI demo</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">ü§ù</div>
            <div class="summary-label">Sponsor Bonus</div>
            <div class="summary-value" id="sumDirect">$0.00</div>
            <div class="summary-tag">Level 1 direct</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üåê</div>
            <div class="summary-label">Generation Bonus</div>
            <div class="summary-value" id="sumGen">$0.00</div>
            <div class="summary-tag">20 level tree</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üèÖ</div>
            <div class="summary-label">Rank Bonus</div>
            <div class="summary-value" id="sumRank">$0.00</div>
            <div class="summary-tag">Rank pool</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üåç</div>
            <div class="summary-label">Global Sale Bonus</div>
            <div class="summary-value" id="sumGlobal">$0.00</div>
            <div class="summary-tag">Weekly sharing</div>
          </div>
          <div class="summary-card">
            <div class="summary-icon">üí∞</div>
            <div class="summary-label">Total Earning</div>
            <div class="summary-value" id="sumTotal">$0.00</div>
            <div class="summary-tag">All income</div>
          </div>
        </div>

        <!-- COMPANY TEXT MARQUEE (LOWER) -->
        <div class="marquee-wrap reverse">
          <div class="marquee-track" id="marquee2"></div>
        </div>

        <!-- INFO GRID -->
        <div class="info-grid">
          <div class="info-card">
            <h4>Account Details</h4>
            <div class="info-row">
              <span>Full Name</span>
              <span id="accName">-</span>
            </div>
            <div class="info-row">
              <span>Username</span>
              <span id="accUser">-</span>
            </div>
            <div class="info-row">
              <span>Email</span>
              <span id="accEmail">-</span>
            </div>
            <div class="info-row">
              <span>Role</span>
              <span id="accRole">-</span>
            </div>
            <div class="info-row">
              <span>Membership</span>
              <span id="accMembership">Free</span>
            </div>
          </div>

          <div class="info-card">
            <h4>Network Info</h4>
            <div class="info-row">
              <span>Country</span>
              <span id="accCountry">-</span>
            </div>
            <div class="info-row">
              <span>Mobile</span>
              <span id="accMobile">-</span>
            </div>
            <div class="info-row">
              <span>Sponsor</span>
              <span id="accSponsor">-</span>
            </div>
            <div class="info-row">
              <span>Joined</span>
              <span id="accJoined">-</span>
            </div>
            <div class="info-row">
              <span>Referral Link</span>
              <span style="max-width:130px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"
                    id="accRefShort">-</span>
            </div>
          </div>
        </div>

        <p class="note">
          ‚ö† ‡¶è‡¶á ‡¶™‡ßÅ‡¶∞‡ßã ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶° / ‡¶°‡ßá‡¶Æ‡ßã‡•§ ‡¶∏‡¶¨ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ localStorage-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡•§
          ‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ USDT / Real Investment ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§
        </p>

      </div>
    </section>
  </div>

<script>
  var STORAGE_CURRENT = "btx_current_user_v1";
  var STORAGE_USERS   = "btx_users_v1";
  var STORAGE_GLOBAL  = "btx_global_text_v1";

  function getCurrentUser(){
    var raw = localStorage.getItem(STORAGE_CURRENT);
    if(!raw) return null;
    try{return JSON.parse(raw);}catch(e){return null;}
  }
  function loadUsers(){
    var raw = localStorage.getItem(STORAGE_USERS);
    if(!raw) return [];
    try{return JSON.parse(raw);}catch(e){return [];}
  }
  function saveUsers(users){
    localStorage.setItem(STORAGE_USERS, JSON.stringify(users));
  }

  function logout(){
    localStorage.removeItem(STORAGE_CURRENT);
    alert("Logged out (demo).");
    window.location.href = "login.html";
  }
  function goHome(){
    window.location.href = "index.html";
  }
  function goAdmin(){
    window.location.href = "admin.html";
  }

  // init dashboard
  (function initDashboard(){
    var user = getCurrentUser();
    if(!user){
      window.location.href = "login.html";
      return;
    }

    // check first time or welcome back
    var visitKey = "btx_visit_" + (user.username || user.email || "x");
    var firstVisit = !localStorage.getItem(visitKey);
    if(firstVisit){
      localStorage.setItem(visitKey, new Date().toISOString());
    }
    var welcomeTitle = firstVisit ? "WELCOME" : "WELCOME BACK";

    // show admin button
    var adminBtn = document.getElementById("adminBtn");
    if(user.role === "admin"){
      adminBtn.style.display = "inline-flex";
    }

    // welcome text
    var nameLabel = user.fullName || user.username || "Member";
    document.getElementById("welcomeName").innerHTML =
      '<span class="big">'+welcomeTitle+'</span>, '+nameLabel;
    document.getElementById("welcomeUser").textContent =
      "@"+(user.username || "");

    // badges
    var badgeRow = document.getElementById("badgeRow");
    var isAdmin  = (user.role === "admin");
    var membership = (user.depositTotal && user.depositTotal > 0) ? "Updated Member" : "Free Member";

    var html = "";
    if(isAdmin){
      html += '<span class="badge-role">‚óè ADMIN ACCESS</span>';
    }else{
      html += '<span class="badge-role badge-member">‚óè MEMBER ACCOUNT</span>';
    }
    html += '<span class="badge-role badge-free">‚óè '+membership.toUpperCase()+'</span>';
    badgeRow.innerHTML = html;

    // right side info
    document.getElementById("infoEmail").textContent   = "Email: "   + (user.email || "-");
    document.getElementById("infoCountry").textContent = "Country: " + (user.country || "-");
    document.getElementById("infoMobile").textContent  = "Mobile: "  + (user.mobile || "-");
    document.getElementById("infoSponsor").textContent = "Sponsor: " + (user.sponsor_username || "N/A");

    // account details
    document.getElementById("accName").textContent        = user.fullName || "-";
    document.getElementById("accUser").textContent        = user.username || "-";
    document.getElementById("accEmail").textContent       = user.email || "-";
    document.getElementById("accRole").textContent        = isAdmin ? "Admin" : "Member";
    document.getElementById("accMembership").textContent  = membership;
    document.getElementById("accCountry").textContent     = user.country || "-";
    document.getElementById("accMobile").textContent      = user.mobile || "-";
    document.getElementById("accSponsor").textContent     = user.sponsor_username || "-";

    if(user.createdAt){
      try{
        var d = new Date(user.createdAt);
        document.getElementById("accJoined").textContent = d.toLocaleString();
      }catch(e){
        document.getElementById("accJoined").textContent = "-";
      }
    }

    // referral link (same logic as ‡¶Ü‡¶ó‡ßá‡¶∞)
    var refLink = user.referralLink;
    if(!refLink){
      refLink = window.location.origin +
        "/register-neon.html?ref=" +
        encodeURIComponent(user.username || "");
    }
    document.getElementById("accRefShort").textContent = refLink;

    // Summary income values (‡¶è‡¶ñ‡¶® ‡¶∏‡¶¨ demo)
    var balance      = user.balance      || 0;
    var depositTotal = user.depositTotal || 0;
    var directIncome = user.directIncome || 0;
    var teamIncome   = user.teamIncome   || 0;
    var rankBonus    = user.rankBonus    || 0;
    var globalBonus  = user.globalBonus  || 0;
    var dailyROI     = user.dailyROI     || 0;
    var totalEarning = balance + directIncome + teamIncome + rankBonus + globalBonus + dailyROI;

    function fmt(x){return "$" + (Number(x)||0).toFixed(2);}

    document.getElementById("sumBalance").textContent = fmt(balance);
    document.getElementById("sumSelf").textContent    = fmt(depositTotal);
    document.getElementById("sumROI").textContent     = fmt(dailyROI);
    document.getElementById("sumDirect").textContent  = fmt(directIncome);
    document.getElementById("sumGen").textContent     = fmt(teamIncome);
    document.getElementById("sumRank").textContent    = fmt(rankBonus);
    document.getElementById("sumGlobal").textContent  = fmt(globalBonus);
    document.getElementById("sumTotal").textContent   = fmt(totalEarning);

    // Company text / global message (admin ‡¶™‡¶∞‡ßá localStorage ‡¶¶‡¶ø‡ßü‡ßá set ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá)
    var globalText = localStorage.getItem(STORAGE_GLOBAL) ||
      "BTX.ONE Demo Announce: Company ROI 1%‚Äì1.5% Daily ‚Ä¢ Sponsor 5% ‚Ä¢ 20 Level Generation ‚Ä¢ Global Pool Every Week ‚Ä¢ This is only a FRONTEND DEMO.";

    function buildMarqueeText(msg){
      var repeated = "";
      for(var i=0;i<4;i++){
        repeated += "<span><b>BTX.ONE</b> ‚Äì "+msg+"</span>";
      }
      return repeated;
    }
    document.getElementById("marquee1").innerHTML = buildMarqueeText(globalText);
    document.getElementById("marquee2").innerHTML = buildMarqueeText(globalText);

    // write back any new fields to users array (first time) ‚Äì optional
    var users = loadUsers();
    var idx = users.findIndex(function(u){return u.id === user.id;});
    if(idx !== -1){
      // ensure fields exist
      users[idx].balance      = balance;
      users[idx].depositTotal = depositTotal;
      users[idx].directIncome = directIncome;
      users[idx].teamIncome   = teamIncome;
      users[idx].rankBonus    = rankBonus;
      users[idx].globalBonus  = globalBonus;
      users[idx].dailyROI     = dailyROI;
      saveUsers(users);
    }
  })();
</script>
</body>
</html>