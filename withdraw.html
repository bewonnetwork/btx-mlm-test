<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Withdraw – BTX.ONE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{background:#020617;color:#e2e8f0;font-family:system-ui;padding:20px;}
  .box{max-width:420px;margin:auto;background:#0f172a;padding:20px;border-radius:16px;box-shadow:0 0 0 1px #334155;}
  .title{text-align:center;font-size:22px;margin-bottom:18px;font-weight:700;}
  input,select{
    width:100%;padding:10px;background:#1e293b;
    border:1px solid #334155;border-radius:10px;color:#fff;margin-bottom:12px;
  }
  button{
    width:100%;padding:12px;
    background:linear-gradient(135deg,#22c55e,#10b981);
    border:none;border-radius:12px;font-weight:bold;color:#0f172a;cursor:pointer;
  }
</style>
</head>
<body>

<div class="box">
  <div class="title">Withdraw (Demo)</div>

  <label>Amount (USDT)</label>
  <input type="number" id="wdAmount" placeholder="Min 5 USDT">

  <label>Wallet Type</label>
  <select id="wdMethod">
    <option value="TRC20">USDT – TRC20</option>
    <option value="BEP20">USDT – BEP20</option>
  </select>

  <label>Wallet Address</label>
  <input type="text" id="wdWallet" placeholder="Paste your Wallet Address">

  <button onclick="submitWithdraw()">Submit Withdraw</button>
</div>

<script>
  const STORAGE_CURRENT = "btx_current_user_v1";
  const STORAGE_WITHDRAWS = "btx_withdraws_v1";

  function loadWithdraws(){
    let raw = localStorage.getItem(STORAGE_WITHDRAWS);
    return raw ? JSON.parse(raw) : [];
  }
  function saveWithdraws(list){
    localStorage.setItem(STORAGE_WITHDRAWS, JSON.stringify(list));
  }
  function getUser(){
    let raw = localStorage.getItem(STORAGE_CURRENT);
    return raw ? JSON.parse(raw) : null;
  }

  function submitWithdraw(){
    let me = getUser();
    if(!me){ alert("Please login first."); return; }

    let amount = parseFloat(document.getElementById("wdAmount").value);
    let wallet = document.getElementById("wdWallet").value.trim();
    let method = document.getElementById("wdMethod").value;

    if(amount < 5){
      alert("Minimum withdraw 5 USDT");
      return;
    }
    if(wallet.length < 8){
      alert("Invalid wallet address");
      return;
    }

    let list = loadWithdraws();
    list.push({
      id:Date.now(),
      userId:me.id,
      username:me.username,
      amount:amount,
      wallet:wallet,
      method:method,
      status:"pending",
      createdAt:new Date().toISOString()
    });

    saveWithdraws(list);
    alert("Withdraw request submitted (demo)");
    window.location.href = "dashboard.html";
  }
</script>

</body>
</html>